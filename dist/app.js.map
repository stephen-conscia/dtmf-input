{"version":3,"file":"app.js","sources":["../src/dtmf-input.ts"],"sourcesContent":["import { Desktop } from \"@wxcc-desktop/sdk\";\n\n//const dtmfLogger = Desktop.logger.createLogger('dtmf-input-logger');\n\nclass DtmfInput extends HTMLElement {\n  private container!: HTMLDivElement;\n  private input!: HTMLInputElement;\n  private pasteButton!: HTMLButtonElement;\n  private submitButton!: HTMLButtonElement;\n\n  static get observedAttributes(): string[] {\n    return ['darkmode'];\n  }\n\n  constructor() {\n    super();\n    const shadow = this.attachShadow({ mode: 'open' });\n    shadow.innerHTML = `\n      <style>\n        :host {\n          display: block;\n          width: 100%;\n          height: 100%;\n          font-family: sans-serif;\n        }\n\n        .container {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          height: 100%;\n          gap: 10px;\n          padding: 1rem;\n          box-sizing: border-box;\n          background: #f0f4f8;\n          color: #222;\n        }\n\n        .container.darkmode {\n          background: #1f2937;\n          color: #f1f5f9;\n        }\n\n        .title {\n          font-size: 1.2rem;\n          font-weight: bold;\n        }\n\n        form {\n          display: flex;\n          gap: 0.5rem;\n        }\n\n        input {\n          padding: 0.5em 0.75em;\n          font-size: 1rem;\n          border: 1px solid #b0b2b6;\n          border-radius: 0.4em;\n          outline: none;\n        }\n\n        .container.darkmode input {\n          background: #374151;\n          color: #f1f5f9;\n          border-color: #4b5563;\n        }\n\n        input:focus {\n          border-color: #3b82f6;\n          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);\n        }\n\n        .button {\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          padding: 0.5em 1em;\n          font-size: 1rem;\n          border: none;\n          border-radius: 0.4em;\n          cursor: pointer;\n          transition: background 0.2s;\n        }\n\n        .button.submit {\n          background-color: #3b82f6;\n          color: white;\n        }\n\n        .button.submit:hover {\n          background-color: #2563eb;\n        }\n\n        .button.paste {\n          background-color: #ecf3fe;\n          color: #222;\n          width: 38px;\n          height: 38px;\n          padding: 0;\n        }\n\n        .container.darkmode .button.paste {\n          background-color: #2c374e;\n          color: #f1f5f9;\n        }\n\n        .button.paste svg {\n          width: 24px;\n          height: 24px;\n        }\n\n        .button.paste:hover {\n          background-color: #d4e0f8;\n        }\n\n        .container.darkmode .button.paste:hover {\n          background-color: #334155;\n        }\n      </style>\n\n      <div class=\"container\">\n        <div class=\"title\">Input DTMF</div>\n        <form>\n          <button type=\"button\" class=\"button paste\" title=\"Paste\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"currentColor\">\n              <path d=\"m720-120-56-57 63-63H480v-80h247l-63-64 56-56 160 160-160 160Zm120-400h-80v-240h-80v120H280v-120h-80v560h200v80H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h167q11-35 43-57.5t70-22.5q40 0 71.5 22.5T594-840h166q33 0 56.5 23.5T840-760v240ZM480-760q17 0 28.5-11.5T520-800q0-17-11.5-28.5T480-840q-17 0-28.5 11.5T440-800q0 17 11.5 28.5T480-760Z\"/>\n            </svg>\n          </button>\n          <input type=\"text\" placeholder=\"Enter DTMF\" maxlength=\"10\"/>\n          <button type=\"submit\" class=\"button submit\">Submit</button>\n        </form>\n      </div>\n    `;\n\n    // dtmfLogger.info(\"Constructor\");\n  }\n\n  connectedCallback() {\n    //dtmfLogger.info(\"Connected Callback\");\n    //Desktop.config.init({ widgetName: \"dtmf-input\", widgetProvider: \"Conscia\" });\n    this.container = this.shadowRoot!.querySelector('.container')!;\n    this.input = this.shadowRoot!.querySelector('input')!;\n    this.pasteButton = this.shadowRoot!.querySelector('.button.paste')!;\n    this.submitButton = this.shadowRoot!.querySelector('.button.submit')!;\n\n    // Paste button event\n    this.pasteButton.addEventListener('click', async () => {\n      if (!navigator.clipboard?.readText) return;\n      const text = await navigator.clipboard.readText();\n      this.input.value = text.replace(/[^0-9*#]/g, '');\n      this.input.focus();\n    });\n\n    // Submit button event\n    this.submitButton.addEventListener('click', (e: Event) => {\n      e.preventDefault();\n      const value = this.input.value.trim();\n      if (value) alert(value); //Desktop.agentContact.sendDtmf(value);\n      this.input.value = '';\n    });\n\n    // Restrict input to 0-9, *, #\n    this.input.addEventListener('input', () => {\n      this.input.value = this.input.value.replace(/[^0-9*#]/g, '');\n    });\n  }\n\n  attributeChangedCallback(name: string, _: string, newValue: string) {\n    if (name === 'darkmode') {\n      if (newValue === 'true') {\n        this.container.classList.add('darkmode');\n      } else {\n        this.container.classList.remove('darkmode');\n      }\n    }\n  }\n}\n\ncustomElements.define('dtmf-input', DtmfInput);\n\n"],"names":["DtmfInput","shadow","_a","text","e","value","name","_","newValue"],"mappings":"yBAIA,MAAMA,UAAkB,WAAY,CAMlC,WAAW,oBAA+B,CACxC,MAAO,CAAC,UAAU,CACpB,CAEA,aAAc,CACZ,MAAA,EACA,MAAMC,EAAS,KAAK,aAAa,CAAE,KAAM,OAAQ,EACjDA,EAAO,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAuHrB,CAEA,mBAAoB,CAGlB,KAAK,UAAY,KAAK,WAAY,cAAc,YAAY,EAC5D,KAAK,MAAQ,KAAK,WAAY,cAAc,OAAO,EACnD,KAAK,YAAc,KAAK,WAAY,cAAc,eAAe,EACjE,KAAK,aAAe,KAAK,WAAY,cAAc,gBAAgB,EAGnE,KAAK,YAAY,iBAAiB,QAAS,SAAY,OACrD,GAAI,GAACC,EAAA,UAAU,YAAV,MAAAA,EAAqB,UAAU,OACpC,MAAMC,EAAO,MAAM,UAAU,UAAU,SAAA,EACvC,KAAK,MAAM,MAAQA,EAAK,QAAQ,YAAa,EAAE,EAC/C,KAAK,MAAM,MAAA,CACb,CAAC,EAGD,KAAK,aAAa,iBAAiB,QAAUC,GAAa,CACxDA,EAAE,eAAA,EACF,MAAMC,EAAQ,KAAK,MAAM,MAAM,KAAA,EAC3BA,SAAaA,CAAK,EACtB,KAAK,MAAM,MAAQ,EACrB,CAAC,EAGD,KAAK,MAAM,iBAAiB,QAAS,IAAM,CACzC,KAAK,MAAM,MAAQ,KAAK,MAAM,MAAM,QAAQ,YAAa,EAAE,CAC7D,CAAC,CACH,CAEA,yBAAyBC,EAAcC,EAAWC,EAAkB,CAC9DF,IAAS,aACPE,IAAa,OACf,KAAK,UAAU,UAAU,IAAI,UAAU,EAEvC,KAAK,UAAU,UAAU,OAAO,UAAU,EAGhD,CACF,CAEA,eAAe,OAAO,aAAcR,CAAS"}